# Tasklist: –°–ø—Ä–∏–Ω—Ç S3 - API Requirements & Mock Implementation

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-17  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-10-17

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ —Å–ø—Ä–∏–Ω—Ç–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –¥–∞—à–±–æ—Ä–¥—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Mock API –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ frontend. –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–±–æ—Ä—â–∏–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Mock –∏ Real —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.

**–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å**: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å backend API –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å Mock –¥–∞–Ω–Ω—ã–º–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–º–∏ –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É frontend –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î.

---

## üéØ –¶–µ–ª–∏ —Å–ø—Ä–∏–Ω—Ç–∞

1. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ª–∞–∫–æ–Ω–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ UI –¥–∞—à–±–æ—Ä–¥–∞
2. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å REST API –∫–æ–Ω—Ç—Ä–∞–∫—Ç (KISS - –æ–¥–∏–Ω endpoint)
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É StatCollector —Å Mock/Real —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π
4. –°–æ–∑–¥–∞—Ç—å Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (OpenAPI/Swagger)
6. –î–æ–±–∞–≤–∏—Ç—å entrypoint –∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç

### üìù –ë–ª–æ–∫ 1: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ó–∞–¥–∞—á–∞ 1.1: –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞—à–±–æ—Ä–¥—É
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–û—Ü–µ–Ω–∫–∞**: 3 —á–∞—Å–∞

**–¶–µ–ª—å**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î —Å—Ö–µ–º—É (users, messages, user_settings)
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
  - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–æ–æ–±—â–µ–Ω–∏–π, –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤)
  - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (—Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥, –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
  - –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫/–¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- [x] –û–ø–∏—Å–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞:
  - Cards —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
  - Timeline –≥—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –§–∏–ª—å—Ç—Ä—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º (–¥–µ–Ω—å, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –≤—Å—ë –≤—Ä–µ–º—è)
- [x] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç `docs/frontend/dashboard-requirements.md`
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è Mock API

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `docs/frontend/dashboard-requirements.md` (–Ω–æ–≤—ã–π)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–µ—Ç—Ä–∏–∫
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–ø–∏—Å–∞–Ω—ã —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞–º–∏
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É KISS
- –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î —Å—Ö–µ–º—ã

---

#### –ó–∞–¥–∞—á–∞ 1.2: –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å REST API –∫–æ–Ω—Ç—Ä–∞–∫—Ç
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–û—Ü–µ–Ω–∫–∞**: 4 —á–∞—Å–∞

**–¶–µ–ª—å**: –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π API –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –µ–¥–∏–Ω—ã–º endpoint –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å endpoint `GET /stats`
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `period` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): `day`, `week`, `month`
- [x] –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å Response Schema (JSON):
  ```json
  {
    "summary": {
      "total_dialogs": int,
      "active_users": int,
      "avg_dialog_length": float
    },
    "activity_timeline": [
      {
        "timestamp": "2025-10-17T10:00:00Z",
        "message_count": 150,
        "active_users": 45
      }
    ],
    "recent_dialogs": [
      {
        "dialog_id": "uuid",
        "user_id": 123,
        "message_count": 25,
        "last_activity": "2025-10-17T10:00:00Z",
        "duration_minutes": 120
      }
    ],
    "top_users": [
      {
        "user_id": 123,
        "username": "user123",
        "message_count": 89,
        "dialog_count": 15,
        "last_activity": "2025-10-17T10:00:00Z"
      }
    ]
  }
  ```
- [x] –°–æ–∑–¥–∞—Ç—å dataclasses –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ (Python):
  ```python
  @dataclass
  class Summary:
      total_dialogs: int
      active_users: int
      avg_dialog_length: float
  
  @dataclass
  class ActivityPoint:
      timestamp: datetime
      message_count: int
      active_users: int
  
  @dataclass
  class RecentDialog:
      dialog_id: str
      user_id: int
      message_count: int
      last_activity: datetime
      duration_minutes: int
  
  @dataclass
  class TopUser:
      user_id: int
      username: str
      message_count: int
      dialog_count: int
      last_activity: datetime
  
  @dataclass
  class StatsResponse:
      summary: Summary
      activity_timeline: list[ActivityPoint]
      recent_dialogs: list[RecentDialog]
      top_users: list[TopUser]
  ```
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å Error Responses (400, 500)
- [x] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç `docs/api/stats-api-contract.md`
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–∏–æ–¥–æ–≤

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `docs/api/stats-api-contract.md` (–Ω–æ–≤—ã–π)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- API –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–ª–µ–¥—É–µ—Ç REST best practices
- Response schema –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞—à–±–æ—Ä–¥—É
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∏–∑ –∑–∞–¥–∞—á–∏ 1.1

---

### üèóÔ∏è –ë–ª–æ–∫ 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ StatCollector

#### –ó–∞–¥–∞—á–∞ 2.1: –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å StatCollector
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–û—Ü–µ–Ω–∫–∞**: 3 —á–∞—Å–∞

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–±–æ—Ä—â–∏–∫–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Mock –∏ Real —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/__init__.py`
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/stats/__init__.py`
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/stats/collector.py` —Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –∫–ª–∞—Å—Å–æ–º `StatCollector`
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
  ```python
  from abc import ABC, abstractmethod
  from dataclasses import dataclass
  from datetime import datetime
  
  class StatCollector(ABC):
      @abstractmethod
      async def get_stats(self, period: str) -> dict:
          """
          –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
          
          Args:
              period: –ü–µ—Ä–∏–æ–¥ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ('day', 'week', 'month')
              
          Returns:
              –°–ª–æ–≤–∞—Ä—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
              
          Raises:
              ValueError: –ï—Å–ª–∏ –ø–µ—Ä–∏–æ–¥ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω
          """
          pass
  ```
- [x] –î–æ–±–∞–≤–∏—Ç—å dataclasses –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤ `backend/api/src/stats/models.py`:
  - `Summary` (–≤—Å–µ–≥–æ –¥–∏–∞–ª–æ–≥–æ–≤, –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞)
  - `ActivityPoint` (—Ç–æ—á–∫–∞ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
  - `RecentDialog` (–ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–∏–∞–ª–æ–≥ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏)
  - `TopUser` (—Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
  - `StatsResponse` (root model)
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/stats/models.py` —Å dataclasses
- [x] –î–æ–±–∞–≤–∏—Ç—å docstrings –∏ type hints
- [x] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–∏–æ–¥–∞ (enum –∏–ª–∏ literal type)

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `backend/api/src/__init__.py` (–Ω–æ–≤—ã–π)
- `backend/api/src/stats/__init__.py` (–Ω–æ–≤—ã–π)
- `backend/api/src/stats/collector.py` (–Ω–æ–≤—ã–π)
- `backend/api/src/stats/models.py` (–Ω–æ–≤—ã–π)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `StatCollector` —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- Pydantic –º–æ–¥–µ–ª–∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –≤—Å–µ –ø–æ–ª—è
- –ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID (Interface Segregation)
- Type hints –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–æ–ª–µ–π
- Docstrings –æ–ø–∏—Å—ã–≤–∞—é—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

#### –ó–∞–¥–∞—á–∞ 2.2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Mock StatCollector
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–û—Ü–µ–Ω–∫–∞**: 5 —á–∞—Å–æ–≤

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é StatCollector, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â—É—é —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/stats/mock_collector.py`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `MockStatCollector(StatCollector)`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
  - Summary: –≤—Å–µ–≥–æ –¥–∏–∞–ª–æ–≥–æ–≤ (100-500), –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (50-200), —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –¥–∏–∞–ª–æ–≥–∞ (10-30 —Å–æ–æ–±—â–µ–Ω–∏–π)
  - Activity Timeline: –ø–æ—á–∞—Å–æ–≤—ã–µ/–¥–Ω–µ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–∏–æ–¥–∞ —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
  - Recent Dialogs: 10-20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (ID, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –¥–ª–∏–Ω–∞, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
  - Top Users: 10-15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–ª–∏—á–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π)
- [x] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º:
  - `day`: –ø–æ—á–∞—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
  - `week`: –¥–Ω–µ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
  - `month`: –¥–Ω–µ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `random` —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- [x] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (3 —Ç–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤)

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `backend/api/src/stats/mock_collector.py` (–Ω–æ–≤—ã–π)
- `backend/api/tests/__init__.py` (–Ω–æ–≤—ã–π)
- `backend/api/tests/test_mock_collector.py` (–Ω–æ–≤—ã–π)

**–ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
```python
import random
from datetime import datetime, timedelta
from .models import Summary, ActivityPoint, RecentDialog, TopUser, StatsResponse

class MockStatCollector(StatCollector):
    def __init__(self, seed: int = 42):
        self._random = random.Random(seed)
    
    async def get_stats(self, period: str) -> dict:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Mock –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞."""
        if period not in ('day', 'week', 'month'):
            raise ValueError(f"Invalid period: {period}")
        
        # Summary
        summary = Summary(
            total_dialogs=self._random.randint(100, 500),
            active_users=self._random.randint(50, 200),
            avg_dialog_length=round(self._random.uniform(10.0, 30.0), 1)
        )
        
        # Activity Timeline (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–∏–æ–¥–∞)
        points_count = {'day': 24, 'week': 7, 'month': 30}[period]
        activity_timeline = [
            ActivityPoint(
                timestamp=datetime.now() - timedelta(hours=i if period == 'day' else 0, days=0 if period == 'day' else i),
                message_count=self._random.randint(50, 200),
                active_users=self._random.randint(10, 50)
            )
            for i in range(points_count)
        ]
        
        # Recent Dialogs
        recent_dialogs = [
            RecentDialog(
                dialog_id=f"dialog-{i}",
                user_id=self._random.randint(1000, 9999),
                message_count=self._random.randint(5, 50),
                last_activity=datetime.now() - timedelta(hours=i),
                duration_minutes=self._random.randint(10, 180)
            )
            for i in range(15)
        ]
        
        # Top Users
        top_users = [
            TopUser(
                user_id=self._random.randint(1000, 9999),
                username=f"user{i}",
                message_count=self._random.randint(50, 300),
                dialog_count=self._random.randint(5, 50),
                last_activity=datetime.now() - timedelta(days=i)
            )
            for i in range(10)
        ]
        
        return StatsResponse(
            summary=summary,
            activity_timeline=activity_timeline,
            recent_dialogs=recent_dialogs,
            top_users=top_users
        )
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- Mock –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –ø–µ—Ä–∏–æ–¥—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –î–∞–Ω–Ω—ã–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π seed)
- –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã)
- Coverage >= 80%

---

### üöÄ –ë–ª–æ–∫ 3: API Server Implementation

#### –ó–∞–¥–∞—á–∞ 3.1: –°–æ–∑–¥–∞—Ç—å FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–û—Ü–µ–Ω–∫–∞**: 4 —á–∞—Å–∞

**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å REST API —Å–µ—Ä–≤–µ—Ä –Ω–∞ FastAPI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `backend/api/pyproject.toml`:
  - `fastapi`
  - `uvicorn[standard]`
  - `pydantic`
  - `pydantic-settings`
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/config.py` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π API:
  - `API_HOST`, `API_PORT`
  - `API_VERSION`
  - `STAT_COLLECTOR_TYPE` (mock/real)
  - `CORS_ORIGINS`
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/app.py` —Å FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OpenAPI metadata
  - –î–æ–±–∞–≤–∏—Ç—å healthcheck endpoint (`GET /health`)
  - –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–æ—É—Ç–µ—Ä –¥–ª—è stats
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/routers/__init__.py`
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/src/routers/stats.py` —Å endpoints:
  - `GET /stats` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π endpoint)
- [x] –î–æ–±–∞–≤–∏—Ç—å dependency injection –¥–ª—è StatCollector
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `backend/api/pyproject.toml` (–Ω–æ–≤—ã–π)
- `backend/api/src/config.py` (–Ω–æ–≤—ã–π)
- `backend/api/src/app.py` (–Ω–æ–≤—ã–π)
- `backend/api/src/routers/__init__.py` (–Ω–æ–≤—ã–π)
- `backend/api/src/routers/stats.py` (–Ω–æ–≤—ã–π)

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞**:
```python
# backend/api/src/app.py
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(
    title="AI TG Bot Stats API",
    version="1.0.0",
    description="API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤"
)

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.get("/health")
async def health_check():
    return {"status": "ok"}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `/docs`
- Healthcheck endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

#### –ó–∞–¥–∞—á–∞ 3.2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Stats Router
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–û—Ü–µ–Ω–∫–∞**: 3 —á–∞—Å–∞

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å —Ä–æ—É—Ç–µ—Ä –¥–ª—è stats endpoints —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `GET /stats` endpoint:
  - Query –ø–∞—Ä–∞–º–µ—Ç—Ä: `period` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, enum: 'day', 'week', 'month')
  - Response: `StatsResponse` –º–æ–¥–µ–ª—å
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ period
- [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:
  - 400 Bad Request (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π period)
  - 500 Internal Server Error
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å dependency –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è StatCollector:
  ```python
  from typing import Literal
  
  async def get_stat_collector() -> StatCollector:
      if config.STAT_COLLECTOR_TYPE == "mock":
          return MockStatCollector()
      else:
          # –í –±—É–¥—É—â–µ–º - RealStatCollector
          raise NotImplementedError("Real collector not implemented yet")
  
  @router.get("/stats")
  async def get_stats(
      period: Literal["day", "week", "month"],
      collector: StatCollector = Depends(get_stat_collector)
  ):
      """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥."""
      return await collector.get_stats(period)
  ```
- [x] –î–æ–±–∞–≤–∏—Ç—å OpenAPI –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
- [x] –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è endpoint (3 —Ç–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤)

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- `backend/api/src/routers/stats.py` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞
- `backend/api/tests/test_stats_router.py` (–Ω–æ–≤—ã–π) - —Ç–µ—Å—Ç—ã

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

---

### üîß –ë–ª–æ–∫ 4: Entrypoint –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

#### –ó–∞–¥–∞—á–∞ 4.1: –°–æ–∑–¥–∞—Ç—å entrypoint –¥–ª—è API —Å–µ—Ä–≤–µ—Ä–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è  
**–û—Ü–µ–Ω–∫–∞**: 2 —á–∞—Å–∞

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–µ main.py).

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/run_api.py` (–æ—Ç–¥–µ–ª—å–Ω—ã–π entrypoint):
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `.env`
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ó–∞–ø—É—Å–∫ uvicorn —Å–µ—Ä–≤–µ—Ä–∞
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ (graceful shutdown)
  - –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:
  ```python
  import uvicorn
  import logging
  from src.config import config
  
  if __name__ == "__main__":
      logging.basicConfig(
          level=logging.INFO,
          format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
      )
      
      uvicorn.run(
          "src.app:app",
          host=config.API_HOST,
          port=config.API_PORT,
          reload=False,
          log_level=config.LOG_LEVEL.lower()
      )
  ```
- [x] –°–æ–∑–¥–∞—Ç—å `backend/api/.env.example` —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
  ```env
  API_HOST=0.0.0.0
  API_PORT=8000
  API_VERSION=v1
  STAT_COLLECTOR_TYPE=mock
  CORS_ORIGINS=["http://localhost:3000"]
  LOG_LEVEL=INFO
  ```
- [x] –î–æ–±–∞–≤–∏—Ç—å README –¥–ª—è API –≤ `backend/api/README.md`:
  - –û–ø–∏—Å–∞–Ω–∏–µ API
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `backend/api/run_api.py` (–Ω–æ–≤—ã–π, –æ—Ç–¥–µ–ª—å–Ω—ã–π entrypoint)
- `backend/api/.env.example` (–Ω–æ–≤—ã–π)
- `backend/api/README.md` (–Ω–æ–≤—ã–π)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `python run_api.py`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `.env`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- README —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
- Entrypoint –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

#### –ó–∞–¥–∞—á–∞ 4.2: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ Makefile
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è  
**–û—Ü–µ–Ω–∫–∞**: 2 —á–∞—Å–∞

**–¶–µ–ª—å**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ Makefile.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `Makefile`:
  ```makefile
  # API –∫–æ–º–∞–Ω–¥—ã
  .PHONY: api-install
  api-install:
      @echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è API..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" sync
  
  .PHONY: api-run
  api-run:
      @echo "–ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run python run_api.py
  
  .PHONY: api-dev
  api-dev:
      @echo "–ó–∞–ø—É—Å–∫ API –≤ dev —Ä–µ–∂–∏–º–µ —Å hot-reload..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run uvicorn src.app:app --reload --host 0.0.0.0 --port 8000
  
  .PHONY: api-test
  api-test:
      @echo "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ API..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run pytest -v
  
  .PHONY: api-test-cov
  api-test-cov:
      @echo "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å coverage..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run pytest --cov=src --cov-report=html --cov-report=term
  
  .PHONY: api-lint
  api-lint:
      @echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ API..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run ruff check src tests
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run mypy src
  
  .PHONY: api-format
  api-format:
      @echo "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ API..."
      cd backend/api && & "$(USERPROFILE)\.local\bin\uv.exe" run ruff format src tests
  
  .PHONY: api-docs
  api-docs:
      @echo "API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞: http://localhost:8000/docs"
      @echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ 'make api-dev' –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
  ```
- [x] –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API `scripts/test-api.sh`:
  - –ó–∞–ø—É—Å–∫ API
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ healthcheck
  - –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ stats endpoint
  - –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [x] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π `README.md` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ API

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- `Makefile` - –¥–æ–±–∞–≤–∏—Ç—å API –∫–æ–º–∞–Ω–¥—ã
- `scripts/test-api.sh` (–Ω–æ–≤—ã–π) - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `README.md` - –æ–±–Ω–æ–≤–∏—Ç—å —Å API —Å–µ–∫—Ü–∏–µ–π

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- –í—Å–µ Makefile –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç API
- README —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ª–µ–≥–∫–æ –¥–æ—Å—Ç—É–ø–Ω–∞

---

### üìö –ë–ª–æ–∫ 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### –ó–∞–¥–∞—á–∞ 5.1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° –°—Ä–µ–¥–Ω–µ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è  
**–û—Ü–µ–Ω–∫–∞**: 2 —á–∞—Å–∞

**–¶–µ–ª—å**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å FastAPI –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –£–ª—É—á—à–∏—Ç—å OpenAPI metadata –≤ `app.py`:
  - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API
  - –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  - –õ–∏—Ü–µ–Ω–∑–∏—è
  - –¢–µ–≥–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ endpoints
- [x] –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è endpoints:
  - Summary –∏ description
  - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤
  - –û–ø–∏—Å–∞–Ω–∏–µ error codes
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Swagger UI –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—é
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –≤ Pydantic –º–æ–¥–µ–ª–∏ (—á–µ—Ä–µ–∑ `Config.json_schema_extra`)
- [x] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å OpenAPI schema –≤ JSON —Ñ–∞–π–ª –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ frontend

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- `backend/api/src/app.py` - —É–ª—É—á—à–∏—Ç—å metadata
- `backend/api/src/routers/stats.py` - –¥–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è
- `backend/api/src/stats/models.py` - –ø—Ä–∏–º–µ—Ä—ã –≤ –º–æ–¥–µ–ª—è—Ö

**–ü—Ä–∏–º–µ—Ä**:
```python
from typing import Literal

@router.get(
    "/stats",
    response_model=StatsResponse,
    summary="–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–∏–∞–ª–æ–≥–æ–≤",
    description="–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (day/week/month)",
    responses={
        200: {
            "description": "–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç",
            "content": {
                "application/json": {
                    "example": {
                        "summary": {
                            "total_dialogs": 234,
                            "active_users": 89,
                            "avg_dialog_length": 15.3
                        },
                        "activity_timeline": [
                            {
                                "timestamp": "2025-10-17T10:00:00Z",
                                "message_count": 150,
                                "active_users": 45
                            }
                        ],
                        "recent_dialogs": [],
                        "top_users": []
                    }
                }
            }
        },
        422: {"description": "–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä period"},
        500: {"description": "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"}
    }
)
async def get_stats(
    period: Literal["day", "week", "month"],
    collector: StatCollector = Depends(get_stat_collector)
):
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥."""
    pass
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è
- Swagger UI —É–¥–æ–±–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- Schema —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ JSON

---

#### –ó–∞–¥–∞—á–∞ 5.2: –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ API
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° –°—Ä–µ–¥–Ω–µ  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è  
**–û—Ü–µ–Ω–∫–∞**: 2 —á–∞—Å–∞

**–¶–µ–ª—å**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É API –ø—Ä–æ–µ–∫—Ç–∞.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å**:
- [x] –°–æ–∑–¥–∞—Ç—å `docs/api/architecture.md`:
  - –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API
  - –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Mermaid)
  - StatCollector pattern (Strategy)
  - Dependency Injection
- [x] –°–æ–∑–¥–∞—Ç—å `docs/api/mock-collector.md`:
  - –û–ø–∏—Å–∞–Ω–∏–µ Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
  - –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [x] –û–±–Ω–æ–≤–∏—Ç—å `docs/roadmap.md`:
  - –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–ø—Ä–∏–Ω—Ç–∞ S3
  - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞
- [x] –°–æ–∑–¥–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã:
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –ø—Ä–æ–µ–∫—Ç–∞
  - Flow –∑–∞–ø—Ä–æ—Å–∞ –∫ stats endpoint
  - StatCollector Strategy pattern

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
- `docs/api/architecture.md` (–Ω–æ–≤—ã–π)
- `docs/api/mock-collector.md` (–Ω–æ–≤—ã–π)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–æ–Ω—è—Ç–Ω–æ
- –î–∏–∞–≥—Ä–∞–º–º—ã –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- Roadmap –æ–±–Ω–æ–≤–ª–µ–Ω

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∏–Ω—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Å—Ç–∏:

1. **Unit —Ç–µ—Å—Ç—ã**: `make api-test` - –≤—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å
2. **Coverage**: `make api-test-cov` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å >= 80%
3. **Lint –∏ type checking**: –¥–æ–±–∞–≤–∏—Ç—å –≤ Makefile –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
4. **–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å API: `make api-dev`
   - [x] –û—Ç–∫—Ä—ã—Ç—å Swagger UI: http://localhost:8000/docs
   - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å healthcheck endpoint: `GET /health`
   - [x] –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `/stats` —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–µ—Ä–∏–æ–¥–∞–º–∏:
     - `GET /stats?period=day`
     - `GET /stats?period=week`
     - `GET /stats?period=month`
   - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å response schema —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:
     - summary (total_dialogs, active_users, avg_dialog_length)
     - activity_timeline (–º–∞—Å—Å–∏–≤ —Å timestamp, message_count, active_users)
     - recent_dialogs (–º–∞—Å—Å–∏–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –¥–∏–∞–ª–æ–≥–æ–≤)
     - top_users (–º–∞—Å—Å–∏–≤ —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
   - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
     - –ó–∞–ø—Ä–æ—Å –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ period (–æ—à–∏–±–∫–∞ 422)
     - –ó–∞–ø—Ä–æ—Å —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º period=invalid (–æ—à–∏–±–∫–∞ 422)
5. **Integration —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç: `bash scripts/test-api.sh`
   - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS headers

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

1. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
   - API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
   - –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è

2. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**:
   - Coverage >= 80% –¥–ª—è API –∫–æ–¥–∞
   - 0 –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞ –∏ mypy
   - –ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID –∏ KISS

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞—à–±–æ—Ä–¥—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
   - API –∫–æ–Ω—Ç—Ä–∞–∫—Ç —á–µ—Ç–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø–∏—Å–∞–Ω–∞ —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏

4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**:
   - Makefile –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
   - –°–∫—Ä–∏–ø—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ API

- **Framework**: FastAPI (–≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI)
- **Validation**: Pydantic (type-safe –º–æ–¥–µ–ª–∏)
- **ASGI Server**: Uvicorn (production-ready)
- **Testing**: pytest + httpx (async —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –°–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏–∑ `docs/vision.md` –∏ `.cursor/rules/conventions.mdc`
- KISS - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π API –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- Strategy Pattern –¥–ª—è StatCollector (–ª–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Mock/Real)
- Dependency Injection –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- Type hints –∏ docstrings –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ backend/api –ø—Ä–æ–µ–∫—Ç–∞

```
backend/api/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ app.py               # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic Settings)
‚îÇ   ‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats.py         # Stats router (GET /stats)
‚îÇ   ‚îî‚îÄ‚îÄ stats/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ collector.py     # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π StatCollector
‚îÇ       ‚îú‚îÄ‚îÄ models.py        # Dataclasses –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ mock_collector.py # Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_mock_collector.py  # Unit-—Ç–µ—Å—Ç—ã Mock
‚îÇ   ‚îî‚îÄ‚îÄ test_stats_router.py    # Integration-—Ç–µ—Å—Ç—ã API
‚îú‚îÄ‚îÄ run_api.py               # Entrypoint –¥–ª—è –∑–∞–ø—É—Å–∫–∞ API
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã**:
- `run_api.py` - –æ—Ç–¥–µ–ª—å–Ω—ã–π entrypoint (–Ω–µ main.py)
- `src/app.py` - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ä–æ—É—Ç–µ—Ä–∞–º–∏
- `src/stats/models.py` - dataclasses (–Ω–µ Pydantic –º–æ–¥–µ–ª–∏)
- –û–¥–∏–Ω endpoint: `GET /stats?period={day|week|month}`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–ø—Ä–∏–Ω—Ç–∞

- [x] –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ë–ª–æ–∫–∞ 1 (–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- [x] –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ë–ª–æ–∫–∞ 2 (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ StatCollector) –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- [x] –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ë–ª–æ–∫–∞ 3 (API Server) –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- [x] –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ë–ª–æ–∫–∞ 4 (Entrypoint –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è) –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- [x] –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ë–ª–æ–∫–∞ 5 (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- [x] Coverage >= 80%
- [x] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [x] Makefile –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] README.md –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- [x] Roadmap –æ–±–Ω–æ–≤–ª–µ–Ω —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ø–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞

---

**–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-10-17 - –°–ø—Ä–∏–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, —á–µ–∫–ª–∏—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã


