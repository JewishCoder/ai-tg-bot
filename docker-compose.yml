services:
  bot:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: ai-tg-bot
    
    # Volume mapping for persistent data
    volumes:
      - ./data:/app/data              # Dialog history
      - ./logs:/app/logs              # Bot logs
      - ./.env.development:/app/.env.development:ro  # Read-only config
    
    # Restart policy
    restart: unless-stopped
    
    # Environment variables
    environment:
      - PYTHONUNBUFFERED=1
      - PYTHONDONTWRITEBYTECODE=1
    
    # Logging configuration
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    # Resource limits (optional, can be adjusted)
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '1.0'
    #       memory: 512M
    #     reservations:
    #       cpus: '0.25'
    #       memory: 128M

